{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "DynamoDBAccess",
			"Effect": "Allow",
			"Action": [
				"dynamodb:GetItem",
				"dynamodb:PutItem",
				"dynamodb:UpdateItem",
				"dynamodb:DeleteItem",
				"dynamodb:Scan",
				"dynamodb:Query",
				"dynamodb:DescribeTable",
				"dynamodb:ListTables",
				"dynamodb:CreateTable",
				"dynamodb:DeleteTable"
			],
			"Resource": [
				"arn:aws:dynamodb:us-west-1:*:table/gwbn-articles",
				"arn:aws:dynamodb:us-west-1:*:table/gwbn-users",
				"arn:aws:dynamodb:us-west-1:*:table/gwbn-analytics",
				"arn:aws:dynamodb:us-west-1:*:table/gwbn-*"
			]
		},
		{
			"Sid": "S3ImageStorage",
			"Effect": "Allow",
			"Action": [
				"s3:PutObject",
				"s3:PutObjectAcl",
				"s3:DeleteObject",
				"s3:GetObject",
				"s3:GetObjectAcl",
				"s3:ListBucket",
				"s3:GetBucketLocation",
				"s3:GetBucketAcl"
			],
			"Resource": [
				"arn:aws:s3:::gwbn-storage",
				"arn:aws:s3:::gwbn-storage/*"
			]
		},
		{
			"Sid": "ParameterStoreAccess",
			"Effect": "Allow",
			"Action": [
				"ssm:GetParameter",
				"ssm:GetParameters",
				"ssm:GetParametersByPath"
			],
			"Resource": [
				"arn:aws:ssm:us-west-1:*:parameter/gwbn/openai/api-key",
				"arn:aws:ssm:us-west-1:*:parameter/gwbn/*"
			]
		},
		{
			"Sid": "CloudWatchLogs",
			"Effect": "Allow",
			"Action": [
				"logs:CreateLogGroup",
				"logs:CreateLogStream",
				"logs:PutLogEvents",
				"logs:DescribeLogGroups",
				"logs:DescribeLogStreams"
			],
			"Resource": [
				"arn:aws:logs:us-west-1:*:log-group:/aws/amplify/*",
				"arn:aws:logs:us-west-1:*:log-group:/aws/lambda/*",
				"arn:aws:logs:us-west-1:*:log-group:gwbn-*"
			]
		},
		{
			"Sid": "LambdaExecution",
			"Effect": "Allow",
			"Action": [
				"lambda:InvokeFunction",
				"lambda:GetFunction",
				"lambda:ListFunctions"
			],
			"Resource": [
				"arn:aws:lambda:us-west-1:*:function:gwbn-*",
				"arn:aws:lambda:us-west-1:*:function:*amplify*"
			]
		},
		{
			"Sid": "APIGatewayAccess",
			"Effect": "Allow",
			"Action": [
				"execute-api:Invoke",
				"execute-api:ManageConnections"
			],
			"Resource": [
				"arn:aws:execute-api:us-west-1:*:*/prod/*",
				"arn:aws:execute-api:us-west-1:*:*/dev/*"
			]
		},
		{
			"Sid": "CognitoAccess",
			"Effect": "Allow",
			"Action": [
				"cognito-idp:AdminGetUser",
				"cognito-idp:AdminListGroupsForUser",
				"cognito-idp:AdminUpdateUserAttributes",
				"cognito-idp:ListUsers",
				"cognito-idp:DescribeUserPool",
				"cognito-idp:DescribeUserPoolClient"
			],
			"Resource": [
				"arn:aws:cognito-idp:us-west-1:*:userpool/*"
			]
		},
		{
			"Sid": "CloudFrontAccess",
			"Effect": "Allow",
			"Action": [
				"cloudfront:CreateInvalidation",
				"cloudfront:GetDistribution",
				"cloudfront:ListDistributions"
			],
			"Resource": [
				"arn:aws:cloudfront::*:distribution/*"
			]
		},
		{
			"Sid": "SSMParameterAccess",
			"Effect": "Allow",
			"Action": [
				"ssm:GetParameter",
				"ssm:GetParameters",
				"ssm:GetParametersByPath"
			],
			"Resource": [
				"arn:aws:ssm:us-west-1:*:parameter/gwbn/*",
				"arn:aws:ssm:us-west-1:*:parameter/amplify/*"
			]
		},
		{
			"Sid": "IAMRolePassThrough",
			"Effect": "Allow",
			"Action": [
				"sts:AssumeRole",
				"sts:TagSession"
			],
			"Resource": [
				"arn:aws:iam::*:role/AmplifySSRLoggingRole-*",
				"arn:aws:iam::*:role/gwbn-*"
			]
		},
		{
			"Sid": "TranscribeAccess",
			"Effect": "Allow",
			"Action": [
				"transcribe:StartTranscriptionJob",
				"transcribe:GetTranscriptionJob",
				"transcribe:ListTranscriptionJobs"
			],
			"Resource": [
				"arn:aws:transcribe:us-west-1:*:transcription-job/gwbn-*"
			]
		},
		{
			"Sid": "BedrockAccess",
			"Effect": "Allow",
			"Action": [
				"bedrock:InvokeModel",
				"bedrock:InvokeModelWithResponseStream"
			],
			"Resource": [
				"arn:aws:bedrock:us-west-1::foundation-model/amazon.nova-lite-v1:0",
				"arn:aws:bedrock:us-west-1::foundation-model/amazon.nova-pro-v1:0",
				"arn:aws:bedrock:us-west-1::foundation-model/anthropic.claude-sonnet-4-20250514-v1:0"
			]
		}
	]
}